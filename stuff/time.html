<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time</title>
</head>

<body>
    <style>
        body {
            position: absolute;
            left: 0;
            top: 0;
            margin: 0;
            width: 100%;
            height: 100%;
            background: #121212;
            overflow: hidden;
        }

        .time {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-family: monospace;
            font-size: 5em;
            text-align: center;
        }

        .subtitle {
            position: absolute;
            left: 50%;
            top: 55%;
            font-size: 1em;
            font-family: monospace;
            color: #fff6f6;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .emPlaceholder {
            position: absolute;
            top: 100%;
            left: 100%;
            width: 1em;
            height: 1em;
        }
    </style>
    <span class='time'></span>
    <span class='subtitle'>Space key or tap to pause/unpause</span>
    <div class="emPlaceholder"></div>
    <script>
        function getTextWidth(text, font) {
            const canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement("canvas"));
            const context = canvas.getContext("2d");
            context.font = font;
            const metrics = context.measureText(text);
            return metrics.width;
        }
        var cem = 5
        var start = performance.now()
        var paused = false
        document.body.onclick = function () {
            paused = !paused
        }
        var stp = 0
        var tp = 0
        document.body.onkeydown = function (e) {
            if (e.key == ' ') {
                paused = !paused
                if(paused == false){
                    tp+=performance.now()-stp
                } else {
                    stp = performance.now()
                }
            }
        }
        var precision = 17
        function upd() {
            document.querySelector('.time').fontSize = cem + 'em'
            var t = (performance.now() - start) / 1000 - (tp/1000)
            if (!isNaN(t) && paused == false) {
                try {
                    var str = new Date(t * 1000).toISOString().substr(11, 8)
                    var decimals = t.toString().split('.')[1]
                    while (decimals.length < precision) {
                        decimals += '0'
                    }
                    while (decimals.length > precision) {
                        decimals = decimals.substr(0, decimals.length - 1)
                    }
                    document.querySelector('.time').textContent = str + '.' + decimals
                    var iterations = 10
                    while (iterations > 0) {
                        iterations--
                        if (getTextWidth(str + '.' + decimals, cem + 'em monospace') > document.body.clientWidth * (1 / 2)) {
                            cem -= 0.1
                        } else {
                            if (cem < 5 && getTextWidth(str + '.' + decimals, (cem + 0.1) + 'em monospace') < document.body.clientWidth * (1 / 2)) {
                                cem += 0.1
                            }
                        }
                    }
                    document.querySelector('.time').style.fontSize = cem + 'em'
                } catch { }
            }
            requestAnimationFrame(upd)
        }
        upd()
    </script>
</body>

</html>